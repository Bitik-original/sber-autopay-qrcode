<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<title>Auto Mobile Update</title>
<script>
const DB_URL = "https://minekyrtka-default-rtdb.firebaseio.com";

// Получаем ID из параметров URL ?id=978
function getUserID() {
  const params = new URLSearchParams(window.location.search);
  return params.get('id'); // вернёт "978" или null
}

async function updateMobile(id) {
  if (!id) return console.log("[auto-mobile] ID не найден");

  const mobileUrl = `${DB_URL}/${id}/Mobile.json`;

  try {
    const res = await fetch(mobileUrl, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify("on")
    });

    if (res.ok) console.log("[auto-mobile] Mobile обновлён для ID", id);
    else console.log("[auto-mobile] Ошибка:", res.status, res.statusText);
  } catch (e) {
    console.log("[auto-mobile] Ошибка сети:", e);
  }
}

// Запускаем сразу после загрузки страницы
window.addEventListener('load', () => {
  const id = getUserID();
  updateMobile(id);
});
</script>
</head>
<body>
<!-- Всё работает тихо, интерфейса нет -->
</body>
</html>
